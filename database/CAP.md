#CAP
### 참고자료
[CAP 이론이란?](https://dongwooklee96.github.io/post/2021/03/26/cap-%EC%9D%B4%EB%A1%A0%EC%9D%B4%EB%9E%80/)
### 개념
- CAP 이론은 다음 3가지 조건을 모두 만족하는 분산 시스템을 만드는 것이 불가능 함을 정의하는 이론
- Consistency나 Availablilty를 둘 다 얻을 수 없음을 의미
- 데이터 베이스의 다양한 조합을 살펴보고 CAP 우선 순위를 정하는 것이 중요
- 관계형 데이터 베이스는 CA. 
- NoSQL은 CP, AP
    - CP: 어떠한 상황에서도 안정적으로 시스템은 운영되지만 일관성이 보장되지 않으면 Error를 반환
    - AP: 어떤 상황에서도 안정적으로 시스템은 운영. 또한 데이터와 상관 없이 안정적인 응답을 받을 수 있음. 다만 데이터에 대한 정합성 보장 불가
### Consistency 일관성
- 가장 최근의 데이터가 읽혀야함. A서버의 데이터를 쓰면 B서버에서 누군가 데이터를 읽을 때 가장 최근의 데이터를 읽을 수 있어야함
- 모든 시스템의 데이터는 어떤 순간에 항상 같은 데이터를 갖는 것. 모든 노드들이 동일 시간 동일데이터를 사용자에게 보여줘야하는 것
- 단 이 동기화의 과정에서는 유저는 대기하게 되면서 가용성 측면에서 보장받지 못함
### Availablity 가용성
- 특정 노드에 장애가 발생하더라도 성공적으로 서비스를 지속하는 것. 보낸 요청에 대한 응답을 줄 수있어야함. 그 응답이 가장 최근의 응답이던, 아니면 이전의 데이터 건 보내줘야함
- 가장 최근의 데이터만 ← 이 제약이 붙게되면 가장 최근인지 아닌지 판단을 할 수 없는 경우 응답을 보내지 못함
- 다만 장애가 발생한 노드가 복구 되었을 때 다른 노드와의 데이터 일관성이 다르다면 일관성이 떨어지는 시스템
### Partition tolerance 분산허용
- 통신에 실패하더라도 시스템이 계속 동작해야한다는 의미
- 노드가 망가진 것이 아닌 네트워크가 고장난 경우
- 만약 통신이 복구되고 동기화가 되는 것을 기다린다면 가용성이 떨어짐